import rclpy
from rclpy.node import Node
from dobot_msgs_v4.srv import SetFloat
from dobot_msgs_v4.msg import PointArray


class MinimalService(Node):
    def __init__(self):
        super().__init__('minimal_service')
        self.srv = self.create_service(SetFloat, 'tocke_kamera', self.poslji_tocke_kamera)
        self.get_logger().info("Storitev 'tocke_kamera' je pripravljena...")

    def poslji_tocke_kamera(self, request, response):
#         tocke = [
#     [0.10646109008789062, 0.0326810188293457, -0.034735984802246094, 94.82138061523438, 0.0, 90.0],
#     [0.10339163208007812, 0.011469944953918457, 0.04140540313720703, 99.80064392089844, 0.0, 73.67871856689453],
#     [0.09357482147216797, -0.007877238273620606, 0.04736627197265625, 104.28704071044922, 0.0, 57.06912612915039],
#     [0.07825540924072266, -0.023660425186157226, 0.05210145950317383, 107.8814697265625, 0.0, 40.01432800292969],
#     [0.058919677734375, -0.034830936431884765, 0.05530452346801758, 110.2353286743164, 0.0, 22.5],
#     [0.08846192932128906, -0.0016073882579803466, 0.06868754577636719, 121.05712127685547, 0.0, 59.19442367553711],
#     [0.09675569915771484, 0.04388104248046875, 0.0690762939453125, 121.37915802001953, -0.0, 99.65985870361328],
#     [0.0804818344116211, 0.0851877670288086, 0.05615145874023437, 111.05342864990234, -0.0, 136.67303466796875],
#     [0.04559803771972656, 0.10629496765136719, 0.03472813415527344, 94.84417724609375, -0.0, 168.75],
#     [0.04292586898803711, 0.10025940704345703, 0.0643481674194336, 117.66674041748047, -0.0, 169.95506286621094],
#     [0.03826190948486328, 0.08300482940673828, 0.0889241943359375, 139.9788360595703, -0.0, 171.73886108398438],
#     [0.03240727615356445, 0.05754955673217773, 0.10445502471923828, 161.87173461914062, -0.0, 176.65853881835938],
#     [0.026303054809570312, 0.028028762817382812, 0.10861959838867188, 176.68780517578125, -3.3177409172058105, -0.0],
#     [0.02835218048095703, 0.0277686824798584, 0.10947687530517578, 176.53594970703125, -1.8382173776626587, -0.0],
#     [0.0304509334564209, 0.027559995651245118, 0.1095059814453125, 176.388671875, -0.3561592400074005, -0.0],
#     [0.032550071716308594, 0.027355226516723633, 0.10947688293457031, 176.24398803710938, 1.1263922452926636, 0.0],
#     [0.03468541717529297, 0.02709851837158203, 0.11015959167480469, 176.0995330810547, 2.611140251159668, 0.0],
#     [0.04726371765136719, 0.01489034366607666, 0.10642351531982422, 162.81875610351562, 0.0, 42.51095199584961],
#     [0.05896463394165039, 0.003636476516723633, 0.09887156677246094, 150.21739196777344, 0.0, 43.96050262451172],
#     [0.0691467514038086, -0.006042450428009033, 0.08777040100097656, 137.52340698242188, 0.0, 44.60368347167969],
#     [0.07717158508300781, -0.01353525161743164, 0.07364682006835938, 124.7132797241211, 0.0, 45.000003814697266],
#     [0.08468235778808594, -0.01017622184753418, 0.06507086944580078, 118.10460662841797, 0.0, 51.42117691040039],
#     [0.09154914093017578, -0.006435390949249268, 0.056298912048339844, 111.17036437988281, 0.0, 57.15569305419922],
#     [0.09695439910888672, -0.0017510660886764526, 0.04697506332397461, 104.0345230102539, 0.0, 62.44870376586914],
#     [0.09976887512207032, 0.004177509307861328, 0.03726832580566406, 96.81480407714844, 0.0, 67.5],
#     [0.10595962524414062, 0.03633063888549805, 0.03894826889038086, 98.02051544189453, -0.0, 92.7857437133789],
#     [0.0971414566040039, 0.0680582504272461, 0.03953327941894531, 98.4627456665039, -0.0, 118.125],
#     [0.07566001892089844, 0.0930172119140625, 0.03894826889038086, 98.02051544189453, -0.0, 143.46426391601562],
#     [0.04576437377929688, 0.10713121032714844, 0.03734201431274414, 96.74285888671875, -0.0, 168.75],
#     [0.030941301345825196, 0.10815660858154297, 0.036846458435058594, 96.40997314453125, -0.0, -179.98936462402344],
#     [0.016207746505737305, 0.10672728729248047, 0.036242652893066406, 95.95497131347656, -0.0, -168.73597717285156],
#     [0.0020412356853485107, 0.10245088195800781, 0.035530242919921876, 95.41798400878906, -0.0, -157.4898681640625],
#     [-0.010759838104248048, 0.09511215209960938, 0.03472864532470703, 94.84269714355469, -0.0, -146.25]
# ]

#         tocke = [
#     [-0.0724916, 0.427032, 0.24776018, 0.0, 45.0, 0.0],
#     [0.18953873, 0.52285871, 0.66036284, 0.0, 45.0, 0.0],
#     [-0.27082108, 0.54630718, 0.54805655, 0.0, 45.0, 0.0],
#     [-0.05973409, 0.45387668, 0.25539629, 0.0, 45.0, 0.0],
#     [0.01404352, 0.56444394, 0.62929523, 0.0, 45.0, 0.0],
#     [-0.0885517, 0.50381564, 0.35167051, 0.0, 45.0, 0.0],
#     [-0.44246371, 0.40716392, 0.59191827, 0.0, 45.0, 0.0],
#     [0.29702981, 0.04885509, 0.18882578, 0.0, 45.0, 0.0],
#     [0.46208278, -0.13262378, 0.62750274, 0.0, 45.0, 0.0],
#     [0.31640008, -0.08982393, 0.26097122, 0.0, 45.0, 0.0],
#     [0.31330629, -0.04852213, 0.21113782, 0.0, 45.0, 0.0],
#     [0.43272018, -0.08181858, 0.73720424, 0.0, 45.0, 0.0],
#     [0.33219876, -0.08643585, 0.29378739, 0.0, 45.0, 0.0],
#     [0.37947905, -0.11539175, 0.27501185, 0.0, 45.0, 0.0],
#     [0.18478475, -0.00934566, 1.02565791, 0.0, 45.0, 0.0],
#     [0.18147688, -0.44891629, 0.51440676, 0.0, 45.0, 0.0],
#     [0.42498661, -0.16673538, 0.48249718, 0.0, 45.0, 0.0],
#     [0.3195062, -0.11990932, 0.27456117, 0.0, 45.0, 0.0],
#     [0.34570093, -0.06691838, 0.26926263, 0.0, 45.0, 0.0],
#     [-0.27217172, -0.35331662, 0.36215768, 0.0, 45.0, 0.0],
#     [-0.15199985, -0.22053904, 1.00423544, 0.0, 45.0, 0.0],
#     [-0.25087343, -0.34027908, 0.85474356, 0.0, 45.0, 0.0],
#     [-0.08540142, -0.27238895, 0.14996655, 0.0, 45.0, 0.0],
#     [-0.25660466, -0.25134162, 0.20692435, 0.0, 45.0, 0.0],
#     [-0.25565289, -0.3506299, 0.31056757, 0.0, 45.0, 0.0],
#     [-0.37375429, -0.34521021, 0.46936655, 0.0, 45.0, 0.0],
#     [-0.38879554, -0.36303035, 0.55592798, 0.0, 45.0, 0.0],
#     [-0.19672062, -0.34362276, 0.25483482, 0.0, 45.0, 0.0],
#     [-0.06490252, -0.06059464, 0.06060329, 0.0, 45.0, 0.0],
#     [-0.22942706, -0.45938072, 0.53613487, 0.0, 45.0, 0.0],
#     [-0.30660679, -0.43079728, 0.61976366, 0.0, 45.0, 0.0],
#     [0.03506235, -0.49713966, 0.54905756, 0.0, 45.0, 0.0],
#     [-0.35221362, -0.41303973, 0.59687654, 0.0, 45.0, 0.0],
#     [-0.25352673, -0.46119524, 0.49943873, 0.0, 45.0, 0.0],
#     [-0.24545752, -0.47735672, 0.53733465, 0.0, 45.0, 0.0],
#     [-0.51277823, 0.03734947, 0.38276602, 0.0, 45.0, 0.0],
#     [-0.56032651, 0.10869746, 0.44226483, 0.0, 45.0, 0.0],
#     [-0.38400617, 0.02236618, 0.18553047, 0.0, 45.0, 0.0],
#     [-0.59400786, 0.05162835, 0.56835797, 0.0, 45.0, 0.0],
#     [-0.38326174, 0.07520374, 0.18364706, 0.0, 45.0, 0.0],
#     [-0.27306605, 0.036479, 0.09566967, 0.0, 45.0, 0.0],
#     [-0.47730493, 0.01904453, 0.27048511, 0.0, 45.0, 0.0],
#     [-0.59720333, 0.05958161, 0.51120344, 0.0, 45.0, 0.0],
#     [-0.3432466, -0.06520251, 0.15055709, 0.0, 45.0, 0.0],
#     [-0.56568331, -0.0031272, 0.73986247, 0.0, 45.0, 0.0],
#     [-0.60183198, -0.00523733, 0.59857609, 0.0, 45.0, 0.0],
#     [-0.51729582, 0.04188258, 0.80423454, 0.0, 45.0, 0.0],
#     [-0.312071798, 0.000634721727, 1.01373435, 0.0, 45.0, 0.0],
# ]
  #     
        tocke = [
           
    [
      0.1488055086596827,
      0.061001069521203155,
      0.5830799384477543,
      96.6036250487339,
      -0.0,
      -85.26397770128729
    ],
    [
      0.14709490061153416,
      0.03445044721069423,
      0.5971385306884369,
      100.66113239770118,
      -0.0,
      -92.92702275208283
    ],
    [
      -0.1783952386684946,
      0.1983679200735569,
      0.5737075436206326,
      93.91826499754914,
      0.0,
      39.84471899924283
    ],
    [
      -0.20781121199115726,
      0.16673297095566525,
      0.5824104816743885,
      96.41140052554364,
      0.0,
      52.2437863487503
    ],
    [
      -0.08563535744280668,
      -0.15125611665637745,
      0.5870966790879494,
      97.75861988858682,
      -0.0,
      169.68943799848566
    ],
    [
      -0.0689161934045427,
      -0.14909671032933794,
      0.6098582093823879,
      104.37890933309227,
      -0.0,
      174.42546029719676
    ],
    [
      -0.1314622863100757,
      0.17973473041942487,
      0.684167911225996,
      128.19452753342784,
      0.0,
      31.06365074298863
    ],
    [
      0.09869468879261345,
      0.13510111801945818,
      0.6600674673848258,
      119.88979534381527,
      -0.0,
      -58.656843455645706
    ],
    [
      -0.16157949099338756,
      -0.07144215080056718,
      0.680151170585801,
      126.7506244619032,
      -0.0,
      136.11023504322384
    ],
    [
      0.13158749546301388,
      0.12843525350819,
      0.5777242842608277,
      95.06773221706877,
      -0.0,
      -65.20186530098425
    ],
    [
      -0.20842110986107817,
      0.06233327790355572,
      0.6821595409058985,
      127.46908943401881,
      0.0,
      83.58694289310623
    ],
    [
      -0.15595641234174334,
      0.21287585792154945,
      0.5877661358613152,
      97.95141489340953,
      0.0,
      32.18167394844645
    ],
    [
      0.08332973102277721,
      0.016894352398292276,
      0.7075988982938004,
      137.30721610506222,
      -0.0,
      -101.70809100833135
    ],
    [
      0.02695839224213594,
      0.1474787239397154,
      0.7142934660274588,
      140.20445864381972,
      -0.0,
      -36.785731508703826
    ],
    [
      0.10331948966316815,
      -0.08470395301403699,
      0.5710297165271693,
      93.15285880404645,
      -0.0,
      -130.12422480060604
    ],
    [
      -0.01385147899992556,
      -0.06608590365246626,
      0.7236658608545805,
      144.58736188894045,
      -0.0,
      -161.8944282092396
    ],
    [
      -0.011252882166145166,
      0.17354621843482537,
      0.7089378118405321,
      137.87358418510487,
      -0.0,
      -16.723619108403234
    ],
    [
      0.14593606357923167,
      0.0876088850169301,
      0.5690213462070717,
      92.57918105164836,
      -0.0,
      -77.60093265049213
    ],
    [
      -0.17109320373040499,
      0.064442775598966,
      0.7189796634410196,
      142.34153799379214,
      0.0,
      80.65992014102177
    ],
    [
      -0.0844011817443656,
      -0.015796128275147335,
      0.7484357614691166,
      159.77351915687663,
      -0.0,
      150.31830193936202
    ],
    [
      -0.15351125479122346,
      -0.1130264408601507,
      0.6292724558099972,
      110.18179576687743,
      -0.0,
      146.70030284609896
    ],
    [
      -0.00607335598276694,
      0.2398668379264976,
      0.5757159139407301,
      94.49277210012045,
      -0.0,
      -12.678573150871522
    ],
    [
      -0.1066327367870103,
      0.15039619027299575,
      0.7209880337611172,
      143.28955333169534,
      0.0,
      28.136627990904163
    ],
    [
      0.12689932549566224,
      -0.04845377572885953,
      0.5797326545809252,
      95.64320446789011,
      -0.0,
      -117.72515745109779
    ],
    [
      -0.25034172181510916,
      0.03624493778591784,
      0.5716991733005351,
      93.34415220445567,
      -0.0,
      92.36801114935636
    ],
    [
      0.026340745498146877,
      -0.05261826305114589,
      0.7183102066676538,
      142.03003056081388,
      -0.0,
      -141.83231580893906
    ],
    [
      -0.1429491135263619,
      0.21043799483616138,
      0.6245862583964363,
      108.76374780368215,
      0.0,
      29.254651196363618
    ],
    [
      0.07384823692179401,
      0.09146527238730973,
      0.7109461821606295,
      138.73495667535954,
      -0.0,
      -69.24691125852084
    ],
    [
      -0.02719028565898252,
      -0.14621457233752821,
      0.6185611474361438,
      106.95776330000413,
      -0.0,
      -173.1754723532966
    ],
    [
      -0.24321501985717908,
      -0.006397185182257022,
      0.580402111354291,
      95.83515264392413,
      -0.0,
      104.76707849886303
    ],
    [
      0.03611612699538925,
      -0.026306073572218508,
      0.7270131447214097,
      146.2703275503021,
      -0.0,
      -129.43324845943565
    ],
    [
      -0.1889913670868004,
      -0.048193968513029,
      0.6714482325320451,
      123.71071478142593,
      -0.0,
      123.71116769371393
    ],
    [
      -0.03246018141580345,
      0.24459004525205957,
      0.5616573217000475,
      90.4774703556617,
      -0.0,
      -5.015528100075758
    ],
    [
      0.05198046717344456,
      0.11115323710317539,
      0.7196491202143855,
      142.65525564598522,
      -0.0,
      -56.84784390901744
    ],
    [
      0.062388472473067925,
      0.005008064616702203,
      0.721657490534483,
      143.61025532246646,
      -0.0,
      -109.37113605912201
    ],
    [
      -0.11982005087901193,
      0.12615375380873947,
      0.7296909718148731,
      147.67193587783774,
      0.0,
      40.535695340420595
    ],
    [
      -0.17429037992503366,
      0.18423638014933996,
      0.6332891964501922,
      111.4075827038562,
      0.0,
      41.65371854587026
    ],
    [
      -0.1771048302830517,
      0.020465012669414865,
      0.713624009254093,
      139.90699201487024,
      -0.0,
      100.72203254132235
    ],
    [
      -0.11890931883815056,
      0.00811880808822392,
      0.7450884776022874,
      157.17096639131788,
      -0.0,
      117.857122189545
    ],
    [
      0.14284775429887944,
      0.076706868772947,
      0.6058414687421928,
      103.19896795092681,
      -0.0,
      -80.52795540257455
    ],
    [
      0.07217084371224333,
      -0.11484461516770456,
      0.5623267784734133,
      90.66846592584412,
      -0.0,
      -142.52329215011363
    ],
    [
      -0.24776257855372402,
      0.07950720718462564,
      0.5629962352467791,
      90.85946892483581,
      0.0,
      79.96894379984847
    ],
    [
      0.14157783298511073,
      0.05058021941354179,
      0.6199000609828754,
      107.35752673068907,
      -0.0,
      -88.19100045336849
    ],
    [
      0.05020261842955632,
      -0.052826706361454506,
      0.7042516144269713,
      135.91704823653058,
      -0.0,
      -134.16927075814183
    ],
    [
      0.054670429897310045,
      0.13494197510639844,
      0.7055905279737029,
      136.46884783262755,
      -0.0,
      -49.18479885822026
    ],
    [
      0.00822448306745846,
      -0.07611979150448225,
      0.7096072686138979,
      138.15909892861077,
      -0.0,
      -154.23138315844244
    ],
    [
      -0.11632695660193304,
      0.07498029607638529,
      0.7470968479223848,
      158.69612633110455,
      0.0,
      65.33383003942738
    ],
    [
      -0.2355676102683726,
      -0.032063268267582476,
      0.5663435191136084,
      91.81466972254016,
      -0.0,
      112.43012354965899
    ],
    [
      -0.06518640351348697,
      0.23915141465853718,
      0.6071803822889246,
      103.59162277394789,
      0.0,
      4.456516497347047
    ],
    [
      -0.19315288816258236,
      0.08041852115227333,
      0.6962181331465811,
      132.71354071460183,
      0.0,
      75.92389784230905
    ],
    [
      0.060619542161103594,
      -0.023989530087408784,
      0.712954552480727,
      139.61134865995223,
      -0.0,
      -121.77020340863845
    ],
    [
      -0.0015801981754076377,
      0.1513753639276554,
      0.7229964040812147,
      144.25909033895454,
      -0.0,
      -24.386664159200425
    ],
    [
      -0.22363344178437294,
      0.14514271518164445,
      0.5683518894337058,
      92.38801546326877,
      0.0,
      59.90683139954545
    ],
    [
      0.08386316320933099,
      -0.10305536921365821,
      0.5850883087678519,
      97.1807557814583,
      -0.0,
      -137.78726985140165
    ],
    [
      -0.24834427853185662,
      0.06290980162413379,
      0.5857577655412177,
      97.3732926264429,
      0.0,
      84.7049660985608
    ],
    [
      -0.18864243406333758,
      0.1851972425039662,
      0.5964690739150711,
      100.46685349429471,
      0.0,
      44.580741297954745
    ],
    [
      -0.0010244228734450564,
      -0.1450843940069256,
      0.6045025551954611,
      102.80694322450724,
      -0.0,
      -165.51242730249942
    ],
    [
      -0.037316578153285825,
      -0.08257581954579318,
      0.7149629228008246,
      140.50379087188426,
      -0.0,
      -174.29349555874302
    ],
    [
      -0.040636051625993055,
      0.16859241928133997,
      0.7176407498942879,
      141.72067826207225,
      -0.0,
      -4.324551758899831
    ],
    [
      -0.11314980949465434,
      0.03588656199601988,
      0.7504441317892141,
      161.5017476614473,
      -0.0,
      97.79500978924442
    ],
    [
      0.1194109337023577,
      0.15230570899486023,
      0.563665692020145,
      91.05048147642756,
      -0.0,
      -57.53882025018929
    ],
    [
      0.14851373191637054,
      0.01781680737541756,
      0.5743770003939984,
      94.10972066182283,
      -0.0,
      -97.66304505079475
    ],
    [
      0.10856797291773868,
      0.164889976559773,
      0.5864272223145836,
      97.56591323237762,
      -0.0,
      -52.80279795147678
    ],
    [
      0.061694451055517,
      -0.11771193587914058,
      0.5991469010085344,
      101.24472359237642,
      -0.0,
      -145.45031490219557
    ],
    [
      0.09251330955401202,
      -0.08862208510309441,
      0.6078498390622904,
      103.7881932037889,
      -0.0,
      -133.05124755268892
    ],
    [
      -0.05488693691045591,
      0.22688295050588017,
      0.6440005048240457,
      114.7294084951221,
      0.0,
      1.5294937452658395
    ],
    [
      -0.15079099783172997,
      -0.09302538422117523,
      0.6660925783451184,
      121.89291389220644,
      -0.0,
      143.77328009402103
    ],
    [
      0.0760687220765848,
      0.046049611601188534,
      0.7163018363475563,
      141.10822925602332,
      -0.0,
      -89.30902365882143
    ],
    [
      -0.10214381348711879,
      -0.14937686231082348,
      0.5643351487935109,
      91.24150570536597,
      -0.0,
      164.95341569977273
    ],
    [
      -0.05927522941479676,
      -0.15566943873568365,
      0.5730380868472668,
      93.72685314248216,
      -0.0,
      177.3524830492804
    ],
    [
      0.037558885954934486,
      -0.12819411465118358,
      0.613205493249217,
      105.3669527977777,
      -0.0,
      -153.1133599529895
    ],
    [
      -0.1818157846919086,
      -0.07156113092477213,
      0.6573896402913625,
      119.01247240889757,
      -0.0,
      131.3742127445111
    ],
    [
      0.1112518821688315,
      -0.01795915187613542,
      0.6620758377049233,
      120.55287754835703,
      -0.0,
      -111.1801356057568
    ],
    [
      -0.11658844781521982,
      -0.10620961497630205,
      0.6747955163988743,
      124.86652945038568,
      -0.0,
      156.17234744352444
    ],
    [
      0.09349926109201553,
      -0.03451117601118957,
      0.6761344299456059,
      125.33340336679962,
      -0.0,
      -118.84318065655398
    ],
    [
      -0.18898591798954636,
      0.048597682280448654,
      0.7049210712003371,
      136.1922555078037,
      0.0,
      88.32296519181895
    ],
    [
      -0.06605616494291647,
      -0.09215143636535039,
      0.7062599847470687,
      136.74685288091786,
      -0.0,
      173.30743709174055
    ],
    [
      -0.06582199666712871,
      0.15592954703284762,
      0.7263436879480438,
      145.9279097665183,
      0.0,
      8.074515590603566
    ],
    [
      -0.024355562941867383,
      0.11639608764937696,
      0.7457579343756532,
      157.6683549907785,
      -0.0,
      -19.65064186049421
    ],
    [
      0.15081885825455663,
      0.04452895695808953,
      0.5603184081533158,
      90.0954930100649,
      -0.0,
      -90.0
    ]
            ]
       
        response.data = []
        for vals in tocke:
            pa = PointArray()
            pa.vrednosti = [float(v) for v in vals]  # IMPORTANT: one point (6 floats)
            response.data.append(pa)

        self.get_logger().info(f"Poslanih toƒçk: {len(response.data)}")
        return response


def main(args=None):
    rclpy.init(args=args)
    minimal_service = MinimalService()
    rclpy.spin(minimal_service)
    rclpy.shutdown()


if __name__ == '__main__':
    main()
